<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="jquery.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Permanent+Marker" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- Bootstrap CSS -->
    <!-- <link rel="stylesheet" href="/styles.css"> -->
    <!-- font awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <!-- Bootstrap JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js">


    <style media="screen">
      .wrapper {
        position: relative;
      }
      .side {
        width: 120px;
      	height: 100px;
        transform: rotate(20deg) skew(20deg);
      	background: red;
        margin: 100px;
        border-radius: 3px;
        position: absolute;
      }
      .side-b {
        width: 119px;
        height: 94px;
        transform: rotate(20deg) skew(20deg);
        background: white;
        border: grey 1px solid;
        margin: 100px;
        position: absolute;
        border-radius: 2px;
        top: -26px;
        left: 99px;
      }
      .left-t {
        width: 122px;
        height: 27px;
        transform: rotate(20deg) skew(60deg);
        background: pink;
        margin: 100px;
        position: absolute;
        border-radius: 4px;
        top: -40px;
        left: -19px;
      }
      .right-t {
        width: 120px;
        height: 50px;
        transform: rotate(20deg) skew(-15deg);
        background: pink;
        margin: 100px;
        position: absolute;
        border-radius: 4px;
        top: -77px;
        left: 115px;
      }
      .top-r {
        width: 120px;
        height: 30px;
        transform: rotate(20deg) skew(-55deg);
        background: pink;
        margin: 100px;
        border-radius: 3px;
        position: absolute;
        left: 77px;
        top: -41px;
      }
      .top-l {
        width: 120px;
        height: 30px;
        transform: rotate(20deg) skew(-55deg);
        background: pink;
        margin: 100px;
        border-radius: 3px;
        position: absolute;
        left: 25px;
        top: -27px;
      }
      .front {
        width: 106px;
        height: 100px;
        background: red;
        margin: 100px;
        transform: rotate(90deg) skew(15deg);
        border-radius: 3px;
        position: absolute;
        left: 115px;
        top: 6px;
      }
      .back {
        width: 101px;
        height: 96px;
        background: white;
        margin: 100px;
        transform: rotate(90deg) skew(15deg);
        border: grey 1px solid;
        position: absolute;
        border-radius: 2px;
        left: 1px;
        top: -34px;
      }
      .top-f {
        width: 62px;
        height: 52px;
        background: black;
        margin: 100px;
        transform: rotate(135deg) skew(60deg) rotateY(50deg);
        border-radius: 3px;
        position: absolute;
        left: 151px;
        top: -39px;
      }
      .top-b {
        width: 98px;
        height: 52px;
        background: black;
        margin: 100px;
        transform: rotate(-15deg) skew(10deg) ;
        border-radius: 3px;
        position: absolute;
        left: -8px;
        top: -88px;
      }
      .tape {
        width: 60px;
        height: 15px;
        transform: rotate(20deg) skew(-55deg);
        background: transparent;
        border: 1px rgb(150, 150, 150) dotted;
        margin: 100px;
        border-radius: 3px;
        position: absolute;
        left: 80px;
        top: -27px;
      }
      .main {
        max-width: 1000px;
        margin: 0 auto;
        border: 1px grey solid;
      }
      .top-r-close {
        width: 120px;
        height: 30px;
        transform: rotate(20deg) skew(-55deg);
        background: yellow;
        margin: 100px;
        border-radius: 3px;
        position: absolute;
        left: 77px;
        top: -41px;
        display: none;
      }
      .top-l-close {
        width: 120px;
        height: 30px;
        transform: rotate(20deg) skew(-55deg);
        background: yellow;
        margin: 100px;
        border-radius: 3px;
        position: absolute;
        left: 25px;
        top: -27px;
        display: none;
      }
      .tape {
        width: 60px;
        height: 15px;
        transform: rotate(20deg) skew(-55deg);
        background: transparent;
        border: 1px rgb(150, 150, 150) dotted;
        margin: 100px;
        border-radius: 3px;
        position: absolute;
        left: 80px;
        top: -27px;
        display: none;
      }
    </style>
    <script src="jquery.js"></script>

  </head>
  <body>
    <form class="" action="index.html" id="feeling-form" method="post" role="search">
      <input type="text" name="" id="feeling" value="">
      <button type="submit" name="button">Enter</button>
    </form>

    <div class="wrapper">
      <div class="back"></div>
      <div class="top-b top-1"></div>
      <div class="side-b"></div>
      <div class="front"></div>
      <div class="right-t top-1"></div>
      <div class="top-f top-1"></div>
      <div class="side"></div>
      <div class="left-t top-1"></div>
      <div class="top-l-close top-2"></div>
      <div class="top-r-close top-2"></div>
      <div class="tape top-2"></div>
    </div>
    <div class="inside">

    </div>
<script src="https://www.gstatic.com/firebasejs/4.3.0/firebase.js"></script>
<script type="text/javascript">
  var open = $(".top-1");
  $(open).click(function(){
    console.log("1")
    open.css("display", "none");
    close.css("display", "block");
  });
  var close = $(".top-2");
  $(close).click(function(){
    console.log("2")
    close.css("display", "none");
    open.css("display", "block");
  });


// Initialize Firebase
var config = {
  apiKey: "AIzaSyBJlmnU-LXCWP4HzroAUSAIQycD2rIIxVs",
  authDomain: "feel-boxes.firebaseapp.com",
  databaseURL: "https://feel-boxes.firebaseio.com",
  projectId: "feel-boxes",
  storageBucket: "",
  messagingSenderId: "7270641180"
};

firebase.initializeApp(config);

var feelAppReference = firebase.database();

$(document).ready(function(){
  $("#feeling-form").submit(function(event){
    event.preventDefault();
    var feeling = $('#feeling').val();
    $('#feeling').val('');

    var feelReference = feelAppReference.ref("feeling");
    feelReference.push({
      feeling: feeling
    })
    console.log(feelReference);
  })
  getFeeling();

})

function getFeeling() {
    // retrieve messages data when .on() initially executes
    // and when its data updates
    // https://firebase.google.com/docs/reference/js/firebase.database.Reference
    feelAppReference.ref('feeling').on('value', function (results) {
      var $feelshelf = $('.inside');
      var feelArray = [];

      var allFeels = results.val();
      // iterate through results coming from database call; messages
      for (var feel in allFeels) {
        var feeling = allFeels[feel].feeling;

        // create message element
        var $feelListElement = $("<div class='col-md-3 book'<div/>");
        var $feelListTitle = $('<h3 class="title">' + feeling + '</h3>');
        var $deleteElement = $('<i class="fa fa-trash pull-right delete"></i>');

        $feelListElement.attr('data-id', feel);

        //$feelListElement.html(feeling);

        $feelListElement.append($feelListTitle);
        $feelListElement.append($deleteElement);

        // push element to array of messages -- this is pushing to an array, not HTTP push
        feelArray.push($feelListElement);
        $deleteElement.on('click', function(e) {
            var id = $(e.target.parentNode).data('id');
            deleteMessage(id);
            //markers[indexOfMarker].setMap(null);
        })
        console.log(feelArray);
      }

      // remove lis to avoid dupes
      // .empty() is a jQuery method to remove all child nodes
      $feelshelf.empty();
      for (var i in feelArray) {
        $feelshelf.append(feelArray[i]);
        console.log(feelArray);
      }
    });
  }
  function deleteMessage(id) {
    var feelReference = feelAppReference.ref('feeling').child(id);
    feelReference.remove();
  }
    </script>
  </body>
</html>
